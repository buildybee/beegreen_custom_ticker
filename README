# ğŸ BeeGreen - Smart Irrigation Controller

**BeeGreen** is a lightweight, low-power smart irrigation controller built on the ESP8266. It offers automatic watering based on scheduled timings, remote pump control via MQTT, OTA updates, and real-time current monitoring â€” all with visual feedback using WS2812B LEDs.

---

## ğŸŒŸ Features

- ğŸŒ **Wi-Fi Manager Integration**
  - Auto-connects or creates an AP for easy configuration.
  - Custom MQTT credentials setup via web portal.

- ğŸ’§ **Pump Control**
  - Manual or scheduled pump activation.
  - Current sensing via INA219 sensor.
  - Double-click physical button support.

- ğŸ”Œ **MQTT Integration**
  - Publishes pump status and power consumption.
  - Responds to control and scheduling commands.
  - OTA update trigger via MQTT topic.

- ğŸ§  **Scheduling with RTC (MCP7940)**
  - Set up daily watering schedules.
  - Persistent alarm support for pump ON/OFF actions.

- ğŸ’¡ **LED Feedback (WS2812B)**
  - Displays system status (Wi-Fi, MQTT, pump state, errors).
  - Reset indication and tank empty alerts.

- ğŸ“¦ **OTA Firmware Updates**
  - Automatically checks for updates from a configurable server.
  - Secure firmware fetching using HTTPS.

- ğŸ§° **EEPROM Storage**
  - Stores MQTT credentials persistently.

---

## ğŸ“· Hardware Requirements

| Component           | Description                            |
|---------------------|----------------------------------------|
| ESP8266             | NodeMCU / ESP-07 supported             |
| INA219              | Current sensor (IÂ²C)                   |
| MCP7940N            | Real-Time Clock (IÂ²C)                  |
| WS2812B             | Addressable RGB LED                   |
| Button              | For reset and manual override         |
| MOSFET              | Controls 12V pump or valve            |
| AHT20 (optional)    | Temperature and humidity monitoring    |

---


## ğŸ”§ Configuration via Portal

After power-up, if credentials are not saved or the Wi-Fi fails to connect, the device creates a Wi-Fi access point. Connect to it and enter the following fields:

- MQTT Server
- MQTT Port
- Username
- Password

---

## ğŸ” Button Behavior

- **Long Press**: Toggles reset trigger mode.
- **Double Click**:
  - If reset mode is active â†’ resets all saved config and restarts.
  - Else â†’ toggles the pump manually.


## ğŸ“¡ MQTT Topics

- For full topic matrix and payload formats, see [Development.md](Development.md).